/*! 
* amazon-quicksight-embedding-sdk v2.7.0
* git@github.com:awslabs/amazon-quicksight-embedding-sdk.git
* https://github.com/awslabs/amazon-quicksight-embedding-sdk
* 
* Copyright 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved.
* SPDX-License-Identifier: Apache-2.0
*/
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).QuickSightEmbedding={})}(this,(function(e){"use strict";function n(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function t(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(n){l(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function r(){r=function(){return e};var e={},n=Object.prototype,t=n.hasOwnProperty,i=Object.defineProperty||function(e,n,t){e[n]=t.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{u({},"")}catch(e){u=function(e,n,t){return e[n]=t}}function l(e,n,t,r){var o=n&&n.prototype instanceof d?n:d,a=Object.create(o.prototype),s=new A(r||[]);return i(a,"_invoke",{value:I(e,t,s)}),a}function p(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f={};function d(){}function h(){}function E(){}var v={};u(v,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(S([])));g&&g!==n&&t.call(g,a)&&(v=g);var O=E.prototype=d.prototype=Object.create(v);function _(e){["next","throw","return"].forEach((function(n){u(e,n,(function(e){return this._invoke(n,e)}))}))}function w(e,n){function r(i,o,a,s){var c=p(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==typeof l&&t.call(l,"__await")?n.resolve(l.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):n.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,i){r(e,t,n,i)}))}return o=o?o.then(i,i):i()}})}function I(e,n,t){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return R()}for(t.method=i,t.arg=o;;){var a=t.delegate;if(a){var s=x(a,t);if(s){if(s===f)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=p(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}function x(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,x(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),f;var i=p(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,f;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function T(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function y(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function S(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return i.next=i}}return{next:R}}function R(){return{value:void 0,done:!0}}return h.prototype=E,i(O,"constructor",{value:E,configurable:!0}),i(E,"constructor",{value:h,configurable:!0}),h.displayName=u(E,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===h||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,u(e,c,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},_(w.prototype),u(w.prototype,s,(function(){return this})),e.AsyncIterator=w,e.async=function(n,t,r,i,o){void 0===o&&(o=Promise);var a=new w(l(n,t,r,i),o);return e.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(O),u(O,c,"Generator"),u(O,a,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return a.type="throw",a.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=t.call(o,"catchLoc"),c=t.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&t.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=n,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),f},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),y(t),f}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var i=r.arg;y(t)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:S(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},e}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,n,t,r,i,o,a){try{var s=e[o](a),c=s.value}catch(e){return void t(e)}s.done?n(c):Promise.resolve(c).then(r,i)}function a(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function s(e){o(a,r,i,s,c,"next",e)}function c(e){o(a,r,i,s,c,"throw",e)}s(void 0)}))}}function s(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function u(e,n,t){return n&&c(e.prototype,n),t&&c(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,n,t){return(n=O(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&d(e,n)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(e,n){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},d(e,n)}function h(e,n){if(null==e)return{};var t,r,i=function(e,n){if(null==e)return{};var t,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,r=f(e);if(n){var i=f(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return function(e,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}(this,t)}}function m(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return g(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function O(e){var n=function(e,n){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==typeof n?n:String(n)}var _={CALLBACK_OPERATION_INVOKED:"CALLBACK_OPERATION_INVOKED",CONTENT_LOADED:"CONTENT_LOADED",EXPERIENCE_INITIALIZED:"EXPERIENCE_INITIALIZED",ERROR_OCCURRED:"ERROR_OCCURRED",SIZE_CHANGED:"SIZE_CHANGED",PARAMETERS_CHANGED:"PARAMETERS_CHANGED",SELECTED_SHEET_CHANGED:"SELECTED_SHEET_CHANGED",MODAL_OPENED:"MODAL_OPENED",Q_SEARCH_CLOSED:"Q_SEARCH_CLOSED",Q_SEARCH_OPENED:"Q_SEARCH_OPENED",Q_SEARCH_FOCUSED:"Q_SEARCH_FOCUSED",Q_SEARCH_SIZE_CHANGED:"Q_SEARCH_SIZE_CHANGED",Q_SEARCH_ENTERED_FULLSCREEN:"Q_SEARCH_ENTERED_FULLSCREEN",Q_SEARCH_EXITED_FULLSCREEN:"Q_SEARCH_EXITED_FULLSCREEN",Q_PANEL_ENTERED_FULLSCREEN:"Q_PANEL_ENTERED_FULLSCREEN",Q_PANEL_EXITED_FULLSCREEN:"Q_PANEL_EXITED_FULLSCREEN"},w={FRAME_STARTED:"FRAME_STARTED",FRAME_MOUNTED:"FRAME_MOUNTED",FRAME_LOADED:"FRAME_LOADED",FRAME_REMOVED:"FRAME_REMOVED"},I={FRAME_NOT_CREATED:"FRAME_NOT_CREATED",NO_BODY:"NO_BODY",NO_CONTAINER:"NO_CONTAINER",INVALID_CONTAINER:"INVALID_CONTAINER",NO_URL:"NO_URL",INVALID_URL:"INVALID_URL",NO_FRAME_OPTIONS:"NO_FRAME_OPTIONS",INVALID_FRAME_OPTIONS:"INVALID_FRAME_OPTIONS"},x={UNRECOGNIZED_CONTENT_OPTIONS:"UNRECOGNIZED_CONTENT_OPTIONS",UNRECOGNIZED_FRAME_OPTIONS:"UNRECOGNIZED_FRAME_OPTIONS",UNRECOGNIZED_EVENT_TARGET:"UNRECOGNIZED_EVENT_TARGET"},T={SET_PARAMETERS:"SET_PARAMETERS",SET_SELECTED_SHEET_ID:"SET_SELECTED_SHEET_ID",SET_Q_SEARCH_QUESTION:"SET_Q_SEARCH_QUESTION",SET_VISUAL_ACTIONS:"SET_VISUAL_ACTIONS",SET_THEME:"SET_THEME",ADD_FILTER_GROUPS:"ADD_FILTER_GROUPS",UPDATE_FILTER_GROUPS:"UPDATE_FILTER_GROUPS",REMOVE_FILTER_GROUPS:"REMOVE_FILTER_GROUPS",ADD_VISUAL_ACTIONS:"ADD_VISUAL_ACTIONS",REMOVE_VISUAL_ACTIONS:"REMOVE_VISUAL_ACTIONS",SET_THEME_OVERRIDE:"SET_THEME_OVERRIDE",PRELOAD_THEMES:"PRELOAD_THEMES"},y={GET_PARAMETERS:"GET_PARAMETERS",GET_SHEETS:"GET_SHEETS",GET_SHEET_VISUALS:"GET_SHEET_VISUALS",GET_VISUAL_ACTIONS:"GET_VISUAL_ACTIONS",GET_SELECTED_SHEET_ID:"GET_SELECTED_SHEET_ID",GET_FILTER_GROUPS_FOR_SHEET:"GET_FILTER_GROUPS_FOR_SHEET",GET_FILTER_GROUPS_FOR_VISUAL:"GET_FILTER_GROUPS_FOR_VISUAL"},A={ACKNOWLEDGE:"ACKNOWLEDGE",INITIATE_PRINT:"INITIATE_PRINT",NAVIGATE_TO_DASHBOARD:"NAVIGATE_TO_DASHBOARD",CLOSE_Q_SEARCH:"CLOSE_Q_SEARCH",UNDO:"UNDO",REDO:"REDO",RESET:"RESET",TOGGLE_BOOKMARKS_PANE:"TOGGLE_BOOKMARKS_PANE"},S=Object.freeze({__proto__:null,ErrorChangeEventName:I,GetterMessageEventName:y,InfoChangeEventName:w,InfoMessageEventName:_,InvokerMessageEventName:A,SetterMessageEventName:T,WarnChangeEventName:x}),R=t(t(t({},w),I),x),b=t(t(t(t({},_),T),y),A),C={ERROR:"ERROR",INFO:"INFO",WARN:"WARN"},N=Object.freeze({__proto__:null,ChangeEventLevel:C,ChangeEventName:R,MessageEventName:b}),L=Object.freeze({__proto__:null}),D=Object.freeze({__proto__:null}),P=Object.freeze({__proto__:null}),U=Object.freeze({__proto__:null}),F={CONSOLE:"CONSOLE",CONTEXT:"CONTEXT",CONTROL:"CONTROL",VISUAL:"VISUAL",DASHBOARD:"DASHBOARD",QSEARCH:"QSEARCH",GENERATIVEQNA:"QSEARCH"},M=Object.freeze({__proto__:null,ExperienceType:F}),k=Object.freeze({__proto__:null}),G={NULL:null,OTHER_BUCKET:null},H={INTEGER:null,STRING:null,DECIMAL:null,DATETIME:null},V=Object.freeze({__proto__:null,CALCULATED_METRIC_COLUMN_TYPE:H,SPECIAL_DATAPOINT_VALUE_TYPES:G}),j=Object.freeze({__proto__:null}),Q=Object.freeze({__proto__:null}),B=Object.freeze({__proto__:null}),z={FULL:"FULL",SEARCH_BAR:"SEARCH_BAR"},q=Object.freeze({__proto__:null,GenerativeQnAPanelType:z}),X=Object.freeze({__proto__:null}),Z=u((function e(n,t,r){s(this,e),this.eventName=n,this.message=t,this.data=r})),K=function(e){p(t,e);var n=v(t);function t(e,r,i,o){var a;return s(this,t),(a=n.call(this,e,i,o)).eventLevel=r,a}return u(t)}(Z),W=function(e){p(t,e);var n=v(t);function t(e,r,i){var o;return s(this,t),(o=n.call(this,e,r,i)).eventName=e,o}return u(t)}(Z),Y=function(e){p(t,e);var n=v(t);function t(e,r,i,o){var a;return s(this,t),(a=n.call(this,e,i,o)).eventTarget=r,a}return u(t)}(W),$=function(e){p(t,e);var n=v(t);function t(e,r,i,o,a,c,u){var l;return s(this,t),(l=n.call(this,e,r,c,u)).timestamp=o,l.version=a,l.eventId=i,l}return u(t)}(Y),J=u((function e(){s(this,e)})),ee=u((function e(){s(this,e),l(this,"success",!0)})),ne=u((function e(n){s(this,e),l(this,"success",!1),this.errorCode=n.errorCode,this.error=n.error,this.message=n.message})),te=u((function e(n){s(this,e),l(this,"success",!0),this.message=n}));let re;const ie=new Uint8Array(16);function oe(){if(!re&&(re="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!re))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return re(ie)}const ae=[];for(let e=0;e<256;++e)ae.push((e+256).toString(16).slice(1));var se={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function ce(e,n,t){if(se.randomUUID&&!n&&!e)return se.randomUUID();const r=(e=e||{}).random||(e.rng||oe)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=r[e];return n}return function(e,n=0){return(ae[e[n+0]]+ae[e[n+1]]+ae[e[n+2]]+ae[e[n+3]]+"-"+ae[e[n+4]]+ae[e[n+5]]+"-"+ae[e[n+6]]+ae[e[n+7]]+"-"+ae[e[n+8]]+ae[e[n+9]]+"-"+ae[e[n+10]]+ae[e[n+11]]+ae[e[n+12]]+ae[e[n+13]]+ae[e[n+14]]+ae[e[n+15]]).toLowerCase()}(r)}var ue=u((function e(n,i,o,c){var u=this;s(this,e),l(this,"send",function(){var e=a(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.experienceFrame&&u.internalExperience){e.next=2;break}throw new Error("Experience has not been initialized");case 2:return t=new Y(n.eventName,u.internalExperience,n.message,n.data),e.abrupt("return",u.experienceFrame.send(t));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"addEventListener",(function(e,n){return u.experienceFrame.addInternalEventListener(e,n)})),l(this,"setLogProvider",(function(e){return u.logger=e,u})),l(this,"getInternalExperienceInfo",(function(n){var r,i,o=-1;do{o++,r=t(t({},n),{},{contextId:u.controlOptions.contextId,discriminator:o}),i=e.getExperienceIdentifier(r)}while(u.experienceIdentifiers.has(i));return u.experienceIdentifiers.add(i),{experienceIdentifier:i,internalExperience:r}})),l(this,"transformContentOptions",(function(e,n){return u.warnUnrecognizedContentOptions(Object.keys(n)),e})),l(this,"warnUnrecognizedContentOptions",(function(e){var n,t,r;e.length>0&&(null===(n=(t=u.frameOptions).onChange)||void 0===n||n.call(t,new K(R.UNRECOGNIZED_CONTENT_OPTIONS,C.WARN,"Experience content options contain unrecognized properties",{unrecognizedContentOptions:e}),{frame:null}),null===(r=u.logger)||void 0===r||r.warn("Experience content options contain unrecognized properties"))})),l(this,"validateFrameOptions",(function(){if(!u.frameOptions.url){var e,n,t="Url is required for the experience";throw null===(e=(n=u.frameOptions).onChange)||void 0===e||e.call(n,new K(R.NO_URL,C.ERROR,t),{frame:null}),new Error(t)}})),this.frameOptions=n,this.contentOptions=i,this.controlOptions=o,this.experienceIdentifiers=c,this.validateFrameOptions()}));l(ue,"getExperienceIdentifier",(function(e){if(e.experienceType===F.DASHBOARD)return[e.contextId,e.experienceType,e.dashboardId,e.discriminator].filter(Boolean).join("-");if(e.experienceType===F.VISUAL)return[e.contextId,e.experienceType,e.dashboardId,e.sheetId,e.visualId,e.discriminator].filter(Boolean).join("-");if([F.CONSOLE,F.CONTROL,F.CONTEXT,F.QSEARCH,F.GENERATIVEQNA].includes(e.experienceType))return[e.contextId,e.experienceType,e.discriminator].filter(Boolean).join("-");throw new Error("Invalid experience unable to build experience identifier")}));const le=2147483647,pe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},fe=Math.floor,de=String.fromCharCode;function he(e){throw new RangeError(pe[e])}const Ee=function(e,n){return e+22+75*(e<26)-((0!=n)<<5)},ve=function(e,n,t){let r=0;for(e=t?fe(e/700):e>>1,e+=fe(e/n);e>455;r+=36)e=fe(e/35);return fe(r+36*e/(e+38))},me=function(e){const n=[];e=function(e){const n=[];let t=0;const r=e.length;for(;t<r;){const i=e.charCodeAt(t++);if(i>=55296&&i<=56319&&t<r){const r=e.charCodeAt(t++);56320==(64512&r)?n.push(((1023&i)<<10)+(1023&r)+65536):(n.push(i),t--)}else n.push(i)}return n}(e);const t=e.length;let r=128,i=0,o=72;for(const t of e)t<128&&n.push(de(t));const a=n.length;let s=a;for(a&&n.push("-");s<t;){let t=le;for(const n of e)n>=r&&n<t&&(t=n);const c=s+1;t-r>fe((le-i)/c)&&he("overflow"),i+=(t-r)*c,r=t;for(const t of e)if(t<r&&++i>le&&he("overflow"),t===r){let e=i;for(let t=36;;t+=36){const r=t<=o?1:t>=o+26?26:t-o;if(e<r)break;const i=e-r,a=36-r;n.push(de(Ee(r+i%a,0))),e=fe(i/a)}n.push(de(Ee(e,0))),o=ve(i,c,s===a),i=0,++s}++i,++r}return n.join("")};var ge=u((function e(n){var t=this;s(this,e),l(this,"classNames",[e.IFRAME_CLASS_NAME]),l(this,"getIframe",(function(){return t.iframe})),l(this,"createIframePlaceholder",(function(n){if(t.iframePlaceholder=document.createElement("div"),t.iframePlaceholder.id="".concat(t.iframeName,"-placeholder"),t.iframePlaceholder.style.width=t.width,t.iframePlaceholder.style.backgroundColor="rgba(0,0,0,.01)",t.iframePlaceholder.style.display="flex",t.iframePlaceholder.style.justifyContent="center",t.iframePlaceholder.style.alignItems="center",t.iframePlaceholder.className="".concat(e.IFRAME_CLASS_NAME,"-placeholder"),t.height.endsWith("px")&&(t.iframePlaceholder.style.height=t.height),n&&"boolean"!=typeof n)t.iframePlaceholder.appendChild(n);else{var r=t.createLoaderSVG();t.iframePlaceholder.appendChild(r)}t.container.appendChild(t.iframePlaceholder)})),l(this,"createIframe",(function(){var e=document.createElement("iframe");return e.className=t.classNames.join(" ").trim(),e.id=t.iframeName,e.name=t.iframeName,e.width=t.width,e.height=t.height,t.loading&&(e.loading=t.loading),e.style.border="0px",e.style.padding="0px",t.iframePlaceholder&&(e.style.opacity="0",e.style.position="absolute"),"0px"===t.width&&"0px"===t.height&&(e.style.position="absolute"),t.container.appendChild(e),t.payload?t.postRequest=t.createPostRequest({src:t.src,target:e.name,container:t.container,payload:t.payload}):e.src=t.src,e})),l(this,"onLoadLocal",(function(e){var n,r;t.iframePlaceholder&&(t.iframePlaceholder.remove(),t.iframe.style.position="",t.iframe.style.opacity="1",t.iframe.style.transition="opacity .5s ease-in-out"),null===(n=t.onLoad)||void 0===n||n.call(t,e),null===(r=t.postRequest)||void 0===r||r.remove()})),l(this,"createPostRequest",(function(e){var n=e.src,t=e.container,r=e.target,i=e.payload;if(!n)throw new Error("No source has been provided.");var o=document.createElement("form");return o.style.visibility="hidden",o.method="POST",o.action=n,o.target=r,o.name="".concat(r,"-form"),Object.keys(i).forEach((function(e){var n=document.createElement("input");n.type="hidden",n.name=e,n.value=i[e],o.appendChild(n)})),t.appendChild(o),null==o||o.submit(),{remove:function(){o.remove()}}})),l(this,"createSvgElement",(function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=document.createElementNS("http://www.w3.org/2000/svg",e);return Object.entries(n).forEach((function(e){var n=m(e,2),t=n[0],r=n[1];return i.setAttribute(t,r)})),Object.entries(t).forEach((function(e){var n=m(e,2),t=n[0],r=n[1];return i.style.setProperty(t,r)})),r.forEach((function(e){return i.appendChild(e)})),i})),l(this,"createLoaderSVG",(function(){var e=[1,2,3].map((function(e){var n=t.createSvgElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:"".concat(e/10)});return t.createSvgElement("circle",{fill:"#ccc",stroke:"none",cx:"".concat(20*e-14),cy:"50",r:"6"},void 0,[n])}));return t.createSvgElement("svg",{version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 100","enable-background":"new 0 0 0 0"},{width:"100px",height:"100px"},e)}));var r=n.id,i=n.src,o=n.width,a=void 0===o?"100%":o,c=n.height,u=void 0===c?"100%":c,p=n.container,f=n.onLoad,d=n.loading,h=n.withIframePlaceholder,E=n.payload,v=n.className;this.width=a,this.height=u,this.onLoad=f,this.iframeName=r,this.loading=d,v&&this.classNames.push(v),this.container=p,this.payload=E,this.src=i,h&&this.createIframePlaceholder(h),this.iframe=this.createIframe(),this.iframe.addEventListener("load",this.onLoadLocal)}));l(ge,"IFRAME_CLASS_NAME","quicksight-embedding-iframe");var Oe="2.7.0",_e=u((function e(n,o,c,u,p,f,d){var h=this;s(this,e),l(this,"MESSAGE_RESPONSE_TIMEOUT",5e3),l(this,"iframe",null),l(this,"send",function(){var e=a(r().mark((function e(n){var t,i,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.controlOptions.sendToControlFrame){e.next=2;break}return e.abrupt("return",h.controlOptions.sendToControlFrame(n));case 2:if(h.iframe){e.next=4;break}throw new Error("Cannot send ".concat(n.eventName,": No experience frame found"));case 4:if(i=ce(),o=new $(n.eventName,n.eventTarget,i,Date.now(),Oe,n.message,n.data),null===(t=h.iframe)||void 0===t||null===(t=t.contentWindow)||void 0===t||t.postMessage(o,h.url),n.eventName!==b.ACKNOWLEDGE){e.next=9;break}return e.abrupt("return",Promise.resolve(new ee));case 9:return e.abrupt("return",new Promise((function(e,t){var r=function n(t){var r,o,a=t.data;(null==a?void 0:a.eventId)===i&&(window.removeEventListener("message",n),!0===(null===(r=a.message)||void 0===r?void 0:r.success)?e(new ee):!1===(null===(o=a.message)||void 0===o?void 0:o.success)?e(new ne(a.message)):e(new te(a.message)))};window.addEventListener("message",r),setTimeout((function(){window.removeEventListener("message",r),t("".concat(n.eventName," timed out"))}),h.MESSAGE_RESPONSE_TIMEOUT)})));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"buildParameterString",(function(e){return e&&"object"===i(e)?Object.entries(e).map((function(e){var n=m(e,2),t=n[0],r=n[1],i=Array.isArray(r)?r:[r],o=encodeURIComponent(t);return i.map(encodeURIComponent).map((function(e){return"p.".concat(o,"=").concat(e)})).join("&")})).join("&"):""})),l(this,"buildQueryString",(function(e){var n=Object.entries(e).reduce((function(e,n){var r=m(n,2),i=r[0],o=r[1];return null!=o?t(t({},e),{},l({},i,"".concat(o))):e}),{punyCodeEmbedOrigin:me("".concat(window.location.origin,"/")),sdkVersion:Oe});return new URLSearchParams(n).toString()})),l(this,"createExperienceIframe",(function(){h.onChange(new K(R.FRAME_STARTED,C.INFO,"Creating the frame",{experience:h.internalExperience}));try{h.setTimeoutInstance(),h.iframe=new ge({id:h.experienceId,src:h.url,width:h.frameOptions.width,height:h.frameOptions.height,container:h.container,onLoad:h.onLoadHandler,withIframePlaceholder:h.frameOptions.withIframePlaceholder,className:h.frameOptions.className}).getIframe()}catch(e){throw h.onChange(new K(R.FRAME_NOT_CREATED,C.ERROR,"Failed to create the frame",{experience:h.internalExperience})),e}h.onChange(new K(R.FRAME_MOUNTED,C.INFO,"The frame mounted",{experience:h.internalExperience,frame:h.iframe}))})),l(this,"addInternalEventListener",(function(e,n){var t=function(t,r){t.eventName===e&&n(t,r)};return h.controlOptions.eventManager.addEventListener(h.experienceId,t,!0),{remove:function(){return h.controlOptions.eventManager.removeEventListener(h.experienceId,t)}}})),l(this,"validateBaseUrl",(function(e){if(!e)throw h.onChange(new K(R.NO_URL,C.ERROR,"Url is required for the experience",{experience:h.internalExperience})),new Error("Url is required for the experience");return e})),l(this,"setTimeoutInstance",(function(){h.timeoutInstance=setTimeout((function(){throw h.onChange(new K(R.FRAME_NOT_CREATED,C.ERROR,"Creating the frame timed out",{experience:h.internalExperience})),new Error("Creating the frame timed out")}),h.controlOptions.timeout)})),l(this,"onLoadHandler",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h.timeoutInstance&&clearTimeout(h.timeoutInstance),h.onChange(new K(R.FRAME_LOADED,C.INFO,"The experience iframe loaded",{experience:h.internalExperience}));case 2:case"end":return e.stop()}}),e)})))),l(this,"getContainer",(function(e){if(!e){var n="Container is required for the experience";throw h.onChange(new K(R.NO_CONTAINER,C.ERROR,n,{experience:h.internalExperience})),new Error(n)}var t=null;if("string"==typeof e)try{t=document.querySelector(e)}catch(e){throw e instanceof Error&&h.onChange(new K(R.INVALID_CONTAINER,C.ERROR,e.message,{experience:h.internalExperience})),e}else"object"===i(e)&&e.nodeName&&(t=e);if(!t){var r="Invalid container '".concat(e,"' for the experience");throw h.onChange(new K(R.INVALID_CONTAINER,C.ERROR,r,{experience:h.internalExperience})),new Error(r)}return t})),l(this,"decorateOnChange",(function(e){return function(n){if(e){var t={frame:h.iframe};e(n,t)}}})),l(this,"decorateOnMessage",(function(e,n){return function(t){n&&h.iframe&&n(t,{frame:h.iframe}),e&&e(t,{frame:h.iframe})}})),l(this,"initializeMutationObserver",(function(){var e=new MutationObserver((function(n){n.some((function(e){return Array.from(e.removedNodes).some((function(e){return e===h.iframe||e===h.container}))}))&&(h.controlOptions.eventManager.cleanUpCallbacksForExperience(h.experienceId),e.disconnect(),h.iframe=null,h.onChange(new K(R.FRAME_REMOVED,C.INFO,"Frame removed from the DOM",{experience:h.internalExperience})))}));e.observe(document.body,{childList:!0,subtree:!0})})),this.frameOptions=n,this.contentOptions=c,this.onChange=this.decorateOnChange(n.onChange),this.onMessage=this.decorateOnMessage(c.onMessage,d),this.container=this.getContainer(n.container),this.internalExperience=p,this.controlOptions=o,this.transformedContentOptions=u,this.experienceId=f,this.url=this.validateBaseUrl(n.url),this.controlOptions.eventManager.addEventListener(this.experienceId,this.onMessage,!0),this.initializeMutationObserver()})),we=["parameters"],Ie=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.transformedContentOptions,r=n.parameters,i=h(n,we),o=f.internalExperience,a=o.contextId,s=o.discriminator;return[e,[f.buildQueryString(t(t({},i),{},{contextId:a,discriminator:s})),f.buildParameterString(r)].join("#")].join(e.includes("?")?"&":"?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),xe=["fitToIframeWidth","locale","parameters","themeOptions","onMessage"],Te=function(e){p(i,e);var n=v(i);function i(e,o,c,u){var p;s(this,i),l(E(p=n.call(this,e,o,c,u)),"setParameters",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_PARAMETERS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"reset",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.RESET)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"addFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.ADD_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"updateFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.UPDATE_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"removeFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.REMOVE_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"getFilterGroups",a(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_FILTER_GROUPS_FOR_VISUAL));case 2:if(n=e.sent,Array.isArray(null==n?void 0:n.message)){e.next=5;break}throw new Error("Failed to retrieve filter groups for the visual");case 5:return e.abrupt("return",n.message);case 6:case"end":return e.stop()}}),e)})))),l(E(p),"getActions",a(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_VISUAL_ACTIONS));case 2:if(n=e.sent,Array.isArray(null==n?void 0:n.message)){e.next=5;break}throw new Error("Failed to retrieve the actions");case 5:return e.abrupt("return",n.message);case 6:case"end":return e.stop()}}),e)})))),l(E(p),"addActions",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.ADD_VISUAL_ACTIONS,{Actions:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setActions",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_VISUAL_ACTIONS,{Actions:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"removeActions",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.REMOVE_VISUAL_ACTIONS,{Actions:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setTheme",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_THEME,{ThemeArn:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setThemeOverride",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_THEME_OVERRIDE,{ThemeOverride:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setPreloadThemes",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.PRELOAD_THEMES,{PreloadThemes:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"extractExperienceFromUrl",(function(e){var n,t,r=/^https:\/\/[^/]+\/embed\/[^/]+\/dashboards\/([\w-]+)\/sheets\/([\w-]+)\/visuals\/([\w-]+)(\?|$)/i.exec(e)||[];if(r.length<5)throw null===(n=(t=p.frameOptions).onChange)||void 0===n||n.call(t,new K(R.INVALID_URL,C.ERROR,"Invalid visual experience url",{url:e}),{frame:p.experienceFrame.iframe}),new Error("Invalid visual experience URL");return{experienceType:F.VISUAL,dashboardId:r[1],sheetId:r[2],visualId:r[3]}})),l(E(p),"interceptMessage",(function(e,n){var t,r,i,o,a;"SIZE_CHANGED"===e.eventName&&p.frameOptions.resizeHeightOnSizeChangedEvent&&(null==n||null===(i=n.frame)||void 0===i||null===(o=i.setAttribute)||void 0===o||o.call(i,"height","".concat(null===(a=e.message)||void 0===a?void 0:a.height,"px")));"EXPERIENCE_INITIALIZED"===e.eventName&&null!==(t=p.contentOptions)&&void 0!==t&&null!==(t=t.themeOptions)&&void 0!==t&&t.themeOverride&&p.setThemeOverride(p.contentOptions.themeOptions.themeOverride),"EXPERIENCE_INITIALIZED"===e.eventName&&null!==(r=p.contentOptions)&&void 0!==r&&null!==(r=r.themeOptions)&&void 0!==r&&r.preloadThemes&&p.setPreloadThemes(p.contentOptions.themeOptions.preloadThemes)})),l(E(p),"transformVisualContentOptions",(function(e){var n=e.fitToIframeWidth,r=e.locale,i=e.parameters,o=e.themeOptions;e.onMessage;var a=h(e,xe),s=p.transformContentOptions({fitToIframeWidth:null==n||n,locale:r},a);return Array.isArray(i)&&(s.parameters=i.reduce((function(e,n){return t(t({},e),{},l({},n.Name,n.Values))}),{})),null!=o&&o.themeArn&&(s.themeArn=o.themeArn),s})),p.experience=p.extractExperienceFromUrl(e.url);var f=p.getInternalExperienceInfo(p.experience),d=f.experienceIdentifier,v=f.internalExperience;return p.internalExperience=v,p.experienceId=d,p.experienceFrame=new Ie(e,c,o,p.transformVisualContentOptions(o),v,d,p.interceptMessage),p}return u(i)}(ue),ye=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.internalExperience,r=n.contextId,i=n.discriminator;return[e,f.buildQueryString(t(t({},f.transformedContentOptions),{},{contextId:r,discriminator:i}))].join(e.includes("?")?"&":"?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),Ae=["locale","onMessage"],Se=function(e){p(t,e);var n=v(t);function t(e,r,i,o){var a;s(this,t),l(E(a=n.call(this,e,r,i,o)),"extractExperienceFromUrl",(function(e){var n,t;if((/^https:\/\/[^/]+\/embedding\/[^/]+\/(start(\/(favorites|dashboards|analyses))?|dashboards\/[\w-]+|analyses\/[\w-]+)(\?|$)/i.exec(e)||[]).length<5)throw null===(n=(t=a.frameOptions).onChange)||void 0===n||n.call(t,new K(R.INVALID_URL,C.ERROR,"Invalid console experience url",{url:e}),{frame:a.experienceFrame.iframe}),new Error("Invalid console experience URL");return{experienceType:F.CONSOLE}})),a.experience=a.extractExperienceFromUrl(e.url);var c=a.getInternalExperienceInfo(a.experience),u=c.experienceIdentifier,p=c.internalExperience;a.internalExperience=p,a.experienceId=u;var f=r.locale;r.onMessage;var d=h(r,Ae),v=a.transformContentOptions({locale:f},d);return a.experienceFrame=new ye(e,i,r,v,p,u),a}return u(t)}(ue),Re=["parameters"],be=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.transformedContentOptions,r=n.parameters,i=h(n,Re),o=f.internalExperience,a=o.contextId,s=o.discriminator;return[e,[f.buildQueryString(t(t({},i),{},{contextId:a,discriminator:s})),f.buildParameterString(r)].join("#")].join(e.includes("?")?"&":"?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),Ce=["parameters","locale","attributionOptions","sheetOptions","toolbarOptions","themeOptions","onMessage"],Ne=function(e){p(i,e);var n=v(i);function i(e,o,c,u){var p;s(this,i),l(E(p=n.call(this,e,o,c,u)),"initiatePrint",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.INITIATE_PRINT)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"undo",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.UNDO)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"redo",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.REDO)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"toggleBookmarksPane",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.TOGGLE_BOOKMARKS_PANE)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"getParameters",a(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_PARAMETERS));case 2:if(n=e.sent,Array.isArray(null==n?void 0:n.message)){e.next=5;break}throw new Error("Failed to retrieve the parameters");case 5:return e.abrupt("return",n.message);case 6:case"end":return e.stop()}}),e)})))),l(E(p),"getSheets",a(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_SHEETS));case 2:if(n=e.sent,Array.isArray(null==n?void 0:n.message)){e.next=5;break}throw new Error("Failed to retrieve the sheets");case 5:return e.abrupt("return",n.message);case 6:case"end":return e.stop()}}),e)})))),l(E(p),"addFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.ADD_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"updateFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.UPDATE_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"removeFilterGroups",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.REMOVE_FILTER_GROUPS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"getFilterGroupsForSheet",function(){var e=a(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_FILTER_GROUPS_FOR_SHEET,{SheetId:n}));case 2:if(t=e.sent,Array.isArray(null==t?void 0:t.message)){e.next=5;break}throw new Error("Failed to retrieve filter groups for the sheet");case 5:return e.abrupt("return",t.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"getFilterGroupsForVisual",function(){var e=a(r().mark((function e(n,t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_FILTER_GROUPS_FOR_VISUAL,{SheetId:n,VisualId:t}));case 2:if(i=e.sent,Array.isArray(null==i?void 0:i.message)){e.next=5;break}throw new Error("Failed to retrieve filter groups for the visual");case 5:return e.abrupt("return",i.message);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),l(E(p),"getVisualActions",function(){var e=a(r().mark((function e(n,t){var i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_VISUAL_ACTIONS,{SheetId:n,VisualId:t}));case 2:if(i=e.sent,Array.isArray(null==i?void 0:i.message)){e.next=5;break}throw new Error("Failed to retrieve the visual actions");case 5:return e.abrupt("return",i.message);case 6:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),l(E(p),"addVisualActions",function(){var e=a(r().mark((function e(n,t,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.ADD_VISUAL_ACTIONS,{SheetId:n,VisualId:t,Actions:i})));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()),l(E(p),"setVisualActions",function(){var e=a(r().mark((function e(n,t,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_VISUAL_ACTIONS,{SheetId:n,VisualId:t,Actions:i})));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()),l(E(p),"getSelectedSheetId",a(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_SELECTED_SHEET_ID));case 2:if(null!=(n=e.sent)&&n.message){e.next=5;break}throw new Error("Failed to retrieve the selected sheet id");case 5:return e.abrupt("return",n.message);case 6:case"end":return e.stop()}}),e)})))),l(E(p),"setSelectedSheetId",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_SELECTED_SHEET_ID,{SheetId:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setTheme",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_THEME,{ThemeArn:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"navigateToDashboard",function(){var e=a(r().mark((function e(n,t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.NAVIGATE_TO_DASHBOARD,{DashboardId:n,Parameters:null==t?void 0:t.parameters})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()),l(E(p),"removeVisualActions",function(){var e=a(r().mark((function e(n,t,i){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.REMOVE_VISUAL_ACTIONS,{SheetId:n,VisualId:t,Actions:i})));case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}()),l(E(p),"getSheetVisuals",function(){var e=a(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.send(new W(b.GET_SHEET_VISUALS,{SheetId:n}));case 2:if(t=e.sent,Array.isArray(null==t?void 0:t.message)){e.next=5;break}throw new Error("Failed to retrieve the sheet visuals");case 5:return e.abrupt("return",t.message);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setParameters",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_PARAMETERS,n)));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"reset",a(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.RESET)));case 1:case"end":return e.stop()}}),e)})))),l(E(p),"setThemeOverride",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.SET_THEME_OVERRIDE,{ThemeOverride:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"setPreloadThemes",function(){var e=a(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.send(new W(b.PRELOAD_THEMES,{PreloadThemes:n})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(E(p),"extractExperienceFromUrl",(function(e){var n,t,r=/^https:\/\/[^/]+\/embed\/[^/]+\/dashboards\/([\w-]+)(\?|$)/i.exec(e)||[];if(r.length<3)throw null===(n=(t=p.frameOptions).onChange)||void 0===n||n.call(t,new K(R.INVALID_URL,C.ERROR,"Invalid dashboard experience url",{url:e}),{frame:null}),new Error("Invalid dashboard experience URL");return{experienceType:F.DASHBOARD,dashboardId:r[1]}})),l(E(p),"interceptMessage",(function(e,n){var t,r,i,o,a;"SIZE_CHANGED"===e.eventName&&p.frameOptions.resizeHeightOnSizeChangedEvent&&(null==n||null===(i=n.frame)||void 0===i||null===(o=i.setAttribute)||void 0===o||o.call(i,"height","".concat(null==e||null===(a=e.message)||void 0===a?void 0:a.height,"px")));"EXPERIENCE_INITIALIZED"===e.eventName&&null!==(t=p.contentOptions)&&void 0!==t&&null!==(t=t.themeOptions)&&void 0!==t&&t.themeOverride&&p.setThemeOverride(p.contentOptions.themeOptions.themeOverride),"EXPERIENCE_INITIALIZED"===e.eventName&&null!==(r=p.contentOptions)&&void 0!==r&&null!==(r=r.themeOptions)&&void 0!==r&&r.preloadThemes&&p.setPreloadThemes(p.contentOptions.themeOptions.preloadThemes)})),l(E(p),"transformDashboardContentOptions",(function(e){var n,r=e.parameters,i=e.locale,o=e.attributionOptions,a=e.sheetOptions,s=e.toolbarOptions,c=e.themeOptions;e.onMessage;var u=h(e,Ce),f=p.transformContentOptions({locale:i},u);return Array.isArray(r)&&(f.parameters=r.reduce((function(e,n){return t(t({},e),{},l({},n.Name,n.Values))}),{})),!0!==(null==o?void 0:o.overlayContent)&&(f.footerPaddingEnabled=!0),(null!=s&&s.export||null!=s&&null!==(n=s.export)&&void 0!==n&&n.print)&&(f.printEnabled=!0),!0!==(null==s?void 0:s.undoRedo)&&(f.undoRedoDisabled=!0),!0!==(null==s?void 0:s.reset)&&(f.resetDisabled=!0),!0===(null==s?void 0:s.bookmarks)&&(f.showBookmarksIcon=!0),null!=a&&a.initialSheetId&&(f.sheetId=a.initialSheetId),"boolean"==typeof(null==a?void 0:a.singleSheet)&&(f.sheetTabsDisabled=a.singleSheet),null!=a&&a.emitSizeChangedEventOnSheetChange&&(f.resizeOnSheetChange=!0),null!=c&&c.themeArn&&(f.themeArn=c.themeArn),f})),p.experience=p.extractExperienceFromUrl(e.url);var f=p.getInternalExperienceInfo(p.experience),d=f.experienceIdentifier,v=f.internalExperience;return p.internalExperience=v,p.experienceId=d,p.experienceFrame=new be(e,c,o,p.transformDashboardContentOptions(o),v,d,p.interceptMessage),p}return u(i)}(ue),Le=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.internalExperience,r=n.contextId,i=n.discriminator;return[e,f.buildQueryString(t(t({},f.transformedContentOptions),{},{contextId:r,discriminator:i}))].join(e.includes("?")?"&":"?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),De=function(e){p(t,e);var n=v(t);function t(){var e;s(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return l(E(e=n.call.apply(n,[this].concat(i))),"close",(function(){return e.send(new W(b.CLOSE_Q_SEARCH))})),l(E(e),"setQuestion",(function(n){return e.send(new W(b.SET_Q_SEARCH_QUESTION,{question:n}))})),l(E(e),"trackOutsideClicks",(function(){var n=function(n){var t;null!==(t=e.experienceFrame.iframe)&&void 0!==t&&t.contains(n.target)||e.close()};window.addEventListener("click",n),e.controlOptions.eventManager.addEventListenerForCleanup(e.experienceId,(function(){return window.removeEventListener("click",n)}))})),l(E(e),"enterFullScreen",(function(n){var r,i;!e.frameStyles&&null!=n&&n.frame&&(e.frameStyles={position:null===(r=n.frame)||void 0===r?void 0:r.style.position,top:null===(i=n.frame)||void 0===i?void 0:i.style.top,left:n.frame.style.left,zIndex:n.frame.style.zIndex,width:n.frame.style.width,height:n.frame.style.height},n.frame.style.position="fixed",n.frame.style.top="0px",n.frame.style.left="0px",n.frame.style.zIndex=t.MAX_Z_INDEX,n.frame.style.width="100vw",n.frame.style.height="100vh")})),l(E(e),"exitFullScreen",(function(n){e.frameStyles&&null!=n&&n.frame&&(n.frame.style.position=e.frameStyles.position,n.frame.style.top=e.frameStyles.top,n.frame.style.left=e.frameStyles.left,n.frame.style.zIndex=e.frameStyles.zIndex,n.frame.style.width=e.frameStyles.width,n.frame.style.height=e.frameStyles.height,e.frameStyles=void 0)})),e}return u(t)}(ue);l(De,"MAX_Z_INDEX","2147483647");var Pe=["hideIcon","hideTopicName","theme","allowTopicSelection","onMessage"],Ue=function(e){p(t,e);var n=v(t);function t(e,r,o,a){var c;s(this,t),l(E(c=n.call(this,e,r,o,a)),"extractExperienceFromUrl",(function(e){var n,t;if((/^https:\/\/[^/]+\/embedding\/[^/]+\/q\/search(\/|\?|$)/i.exec(e)||[]).length<2)throw null===(n=(t=c.frameOptions).onChange)||void 0===n||n.call(t,new K(R.INVALID_URL,C.ERROR,"Invalid q-search experience URL",{url:e}),{frame:c.experienceFrame.iframe}),new Error("Invalid q-search experience URL");return{experienceType:F.QSEARCH}})),l(E(c),"interceptMessage",(function(e,n){switch(e.eventName){case b.Q_SEARCH_OPENED:case b.Q_SEARCH_CLOSED:var t,r;if("object"===i(e.message))null==n||null===(t=n.frame)||void 0===t||t.style.setProperty("height","".concat(null==e||null===(r=e.message)||void 0===r?void 0:r.height,"px"));break;case b.CONTENT_LOADED:c.trackOutsideClicks();break;case b.Q_SEARCH_ENTERED_FULLSCREEN:c.enterFullScreen(n);break;case b.Q_SEARCH_EXITED_FULLSCREEN:c.exitFullScreen(n)}})),l(E(c),"transformQSearchContentOptions",(function(e){var n=e.hideIcon,t=e.hideTopicName,r=e.theme,i=e.allowTopicSelection;e.onMessage;var o=h(e,Pe),a=c.transformContentOptions({allowTopicSelection:i},o);return void 0!==n&&(a.qBarIconDisabled=n),void 0!==t&&(a.qBarTopicNameDisabled=t),void 0!==r&&(a.themeId=r),a})),c.experience=c.extractExperienceFromUrl(e.url);var u=c.getInternalExperienceInfo(c.experience),p=u.experienceIdentifier,f=u.internalExperience;return c.internalExperience=f,c.experienceId=p,c.experienceFrame=new Le(e,o,r,c.transformQSearchContentOptions(r),f,p,c.interceptMessage),c}return u(t)}(De),Fe=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.internalExperience,r=n.contextId,i=n.discriminator;return[e,f.buildQueryString(t(t({},f.transformedContentOptions),{},{contextId:r,discriminator:i}))].join(e.includes("?")?"&":"?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),Me=["onMessage","showTopicName","showPinboard","allowTopicSelection","allowFullscreen","searchPlaceholderText","panelOptions","themeOptions"],ke=["panelType","title","showQIcon"],Ge=["panelType","focusedHeight","expandedHeight"],He=function(e){p(t,e);var n=v(t);function t(e,r,o,a){var c;s(this,t),l(E(c=n.call(this,e,r,o,a)),"extractExperienceFromUrl",(function(e){var n,t;if((/^https:\/\/[^/]+\/embedding\/[^/]+\/q\/search(\/|\?|$)/i.exec(e)||[]).length<2)throw null===(n=(t=c.frameOptions).onChange)||void 0===n||n.call(t,new K(R.INVALID_URL,C.ERROR,"Invalid generative-qna experience URL",{url:e}),{frame:c.experienceFrame.iframe}),new Error("Invalid generative-qna experience URL");return{experienceType:F.GENERATIVEQNA}})),l(E(c),"interceptMessage",(function(e,n){switch(e.eventName){case b.Q_SEARCH_OPENED:case b.Q_SEARCH_CLOSED:case b.Q_SEARCH_FOCUSED:var t,r;if("object"===i(e.message))null==n||null===(t=n.frame)||void 0===t||t.style.setProperty("height","".concat(null==e||null===(r=e.message)||void 0===r?void 0:r.height));break;case b.CONTENT_LOADED:var o;(null===(o=c.contentOptions)||void 0===o||null===(o=o.panelOptions)||void 0===o?void 0:o.panelType)===z.SEARCH_BAR&&c.trackOutsideClicks();break;case b.Q_PANEL_ENTERED_FULLSCREEN:c.enterFullScreen(n);break;case b.Q_PANEL_EXITED_FULLSCREEN:c.exitFullScreen(n)}})),l(E(c),"transformGenerativeQnAContentOptions",(function(e){var n=[],t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object.keys(e).forEach((function(e){n.push(t+e)}))};e.onMessage;var r=e.showTopicName,i=e.showPinboard,o=e.allowTopicSelection,a=e.allowFullscreen,s=e.searchPlaceholderText,u=e.panelOptions,l=e.themeOptions;t(h(e,Me));var p={qShowTopicName:r,qShowPinboard:i,qAllowTopicSelection:o,qAllowFullscreen:a};if("string"==typeof s&&(c.checkMaxLength(s,"searchPlaceholderText"),p.qSearchPlaceholderText=encodeURIComponent(s)),u){var f=u.panelType;if(p.qPanelType=f,f===z.FULL){u.panelType;var d=u.title,E=u.showQIcon,v=h(u,ke);"string"==typeof d&&(c.checkMaxLength(d,"panelOptions.title"),p.qPanelTitle=encodeURIComponent(d)),p.qShowPanelIcon=E,t(v,"panelOptions.")}else{if(f!==z.SEARCH_BAR)throw new Error("panelOptions.panelType should be one of following: [FULL, SEARCH_BAR]");u.panelType;var m=u.focusedHeight,g=u.expandedHeight,O=h(u,Ge);p.qPanelFocusedHeight=m,p.qPanelExpandedHeight=g,t(O,"panelOptions.")}}return null!=l&&l.themeArn&&(p.themeArn=l.themeArn),c.warnUnrecognizedContentOptions(n),p})),l(E(c),"checkMaxLength",(function(e,n){var r=t.TEXT_PROPERTY_MAX_LENGTH;if(e.length>r)throw new Error("".concat(n," should be less than ").concat(r," characters"))})),c.experience=c.extractExperienceFromUrl(e.url);var u=c.getInternalExperienceInfo(c.experience),p=u.experienceIdentifier,f=u.internalExperience;return c.internalExperience=f,c.experienceId=p,c.experienceFrame=new Fe(e,o,r,c.transformGenerativeQnAContentOptions(r),f,p,c.interceptMessage),c}return u(t)}(De);l(He,"TEXT_PROPERTY_MAX_LENGTH",200);var Ve=function(e){p(r,e);var n=v(r);function r(e,i,o,a,c,u,p){var f;return s(this,r),l(E(f=n.call(this,e,i,o,a,c,u,p)),"buildExperienceUrl",(function(e){var n=f.internalExperience,r=n.contextId,i=n.discriminator;return[e,f.buildQueryString(t(t({},f.transformedContentOptions),{},{contextId:r,discriminator:i}))].join("?")})),f.url=f.buildExperienceUrl(e.url),f.createExperienceIframe(),f}return u(r)}(_e),je=u((function e(n,r,i,o){var a=this;s(this,e),l(this,"experience",{experienceType:F.CONTROL}),l(this,"send",(function(e){return a.controlExperienceFrame.send(e)})),l(this,"controlFrameMessageListener",(function(e){if(a.isMessageEvent(e.data)){var n=e.data;try{if(n.eventTarget){var t=ue.getExperienceIdentifier(n.eventTarget);a.eventManager.invokeEventListener(t,n)}a.sendAcknowledgment(n)}catch(e){var r,i;null===(r=a.onChange)||void 0===r||r.call(a,new K(R.UNRECOGNIZED_EVENT_TARGET,C.WARN,"Message with unrecognized event target received",{eventTarget:n.eventTarget}),{frame:a.controlExperienceFrame.iframe}),null===(i=a.logger)||void 0===i||i.warn("Message with unrecognized event target received")}}})),l(this,"sendAcknowledgment",(function(e){var n,t,r=new Y(b.ACKNOWLEDGE,a.internalExperience,{eventName:e.eventName,eventTarget:e.eventTarget});(null===(n=(t=window).requestIdleCallback)||void 0===n?void 0:n.call(t,(function(){return a.send(r)})))||a.send(r)})),l(this,"getControlExperienceId",(function(){return[a.internalExperience.contextId,a.internalExperience.experienceType,a.internalExperience.discriminator].filter(Boolean).join("-")})),l(this,"getControlExperienceBaseUrl",(function(){var e=a.urlInfo,n=e.host,t=e.sessionId,r="".concat(n,"/embed/").concat(t,"/embedControl");return new URL(r).href})),l(this,"isMessageEvent",(function(e){return!!e&&!!e.eventTarget&&!!e.eventName})),this.container=n,this.eventManager=r.eventManager,this.urlInfo=r.urlInfo,this.onChange=i,this.logger=o,this.internalExperience=t(t({},this.experience),{},{contextId:r.contextId,discriminator:0});var c=this.getControlExperienceId();this.controlExperienceFrame=new Ve({url:this.getControlExperienceBaseUrl(),container:this.container,width:"0px",height:"0px",onChange:this.onChange},{eventManager:this.eventManager,contextId:this.internalExperience.contextId,timeout:e.FRAME_TIMEOUT,urlInfo:this.urlInfo},{},{},this.internalExperience,c),window.addEventListener("message",this.controlFrameMessageListener),this.eventManager.addEventListenerForCleanup(c,(function(){return window.removeEventListener("message",a.controlFrameMessageListener)}))}));l(je,"FRAME_TIMEOUT",6e4);var Qe=u((function e(){var n=this;s(this,e),l(this,"addEventListener",(function(e,t,r){if(!e)throw new Error("Experience identifier is required when calling addEventListener");if("function"!=typeof t)throw new Error("Invalid type provided for event listener");var i=n.eventListeners.get(e);return r&&n.addEventListenerForCleanup(e,(function(){return n.removeEventListener(e,t)})),i?(i.push(t),n):(n.eventListeners.set(e,[t]),n)})),l(this,"invokeEventListener",(function(e,t){var r=n.eventListeners.get(e);if(!r)throw new Error("Unable to find experience specific event listeners: ".concat(e));return r.forEach((function(e){e(t)})),n})),l(this,"removeEventListener",(function(e,t){var r=n.eventListeners.get(e);if(!r)throw new Error("Unable to find experience specific event listeners: ".concat(e));var i=r.filter((function(e){return e!==t}));return n.eventListeners.set(e,i),n})),l(this,"addEventListenerForCleanup",(function(e,t){var r,i=null!==(r=n.cleanUpCallbacks.get(e))&&void 0!==r?r:[];i.push(t),n.cleanUpCallbacks.set(e,i)})),l(this,"cleanUpCallbacksForExperience",(function(e){var t=n.cleanUpCallbacks.get(e);t&&(t.forEach((function(e){return e()})),n.cleanUpCallbacks.delete(e),n.eventListeners.set(e,[]))})),this.eventListeners=new Map,this.cleanUpCallbacks=new Map})),Be=u((function e(){s(this,e),l(this,"log",console.log),l(this,"warn",console.warn),l(this,"error",console.error),l(this,"debug",console.debug),l(this,"info",console.info)})),ze=u((function e(n){var t=this;s(this,e),l(this,"embedVisual",function(){var e=a(r().mark((function e(n){var i,o,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:{},t.validateFrameOptions(n,"embedVisual"),o=t.buildControlOptions(n),e.abrupt("return",new Te(n,i,o,t.experienceIdentifiers).setLogProvider(t.logger));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"embedDashboard",function(){var e=a(r().mark((function e(n){var i,o,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:{},t.validateFrameOptions(n,"embedDashboard"),o=t.buildControlOptions(n),e.abrupt("return",new Ne(n,i,o,t.experienceIdentifiers).setLogProvider(t.logger));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"embedConsole",function(){var e=a(r().mark((function e(n){var i,o,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:{},t.validateFrameOptions(n,"embedConsole"),o=t.buildControlOptions(n),e.abrupt("return",new Se(n,i,o,t.experienceIdentifiers).setLogProvider(t.logger));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"embedQSearchBar",function(){var e=a(r().mark((function e(n){var i,o,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:{},t.validateFrameOptions(n,"embedQSearchBar"),o=t.buildControlOptions(n),e.abrupt("return",new Ue(n,i,o,t.experienceIdentifiers).setLogProvider(t.logger));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"embedGenerativeQnA",function(){var e=a(r().mark((function e(n){var i,o,a=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.length>1&&void 0!==a[1]?a[1]:{},t.validateFrameOptions(n,"embedGenerativeQnA"),o=t.buildControlOptions(n),e.abrupt("return",new He(n,i,o,t.experienceIdentifiers).setLogProvider(t.logger));case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),l(this,"validateFrameOptions",(function(e,n){if(!e){var r="".concat(n," is called without frameOptions");throw t.onChange(new K(R.NO_FRAME_OPTIONS,C.ERROR,"".concat(n," is called without frameOptions"),{methodName:n}),{frame:null}),new Error(r)}if("object"!==i(e)||Array.isArray(e)){var o="".concat(n," is called with non-object frameOptions");throw t.onChange(new K(R.INVALID_FRAME_OPTIONS,C.ERROR,o,{methodName:n,frameOptionsType:Array.isArray(e)?"array":i(e)}),{frame:null}),new Error(o)}var a=["url","container","width","height","resizeHeightOnSizeChangedEvent","withIframePlaceholder","onChange","className"],s=Object.keys(e).filter((function(e){return!a.includes(e)}));if(s.length>0){var c,u,l="".concat(n," is called with unrecognized properties");null===(c=e.onChange)||void 0===c||c.call(e,new K(R.UNRECOGNIZED_FRAME_OPTIONS,C.WARN,l,{unrecognizedFrameOptions:s}),{frame:null}),null===(u=t.logger)||void 0===u||u.warn(l)}})),l(this,"buildControlOptions",(function(e){if(!t.controlOptions){if(!e.url)throw new Error("URL is missing in frame options, but is a required field");var n=t.getControlUrlInfo(e.url),r=new je(t.getBodyElement(),{eventManager:t.eventManager,urlInfo:n,contextId:t.contextId},t.onChange,t.logger);t.controlOptions={eventManager:t.eventManager,sendToControlFrame:r.send,contextId:t.contextId,timeout:je.FRAME_TIMEOUT,urlInfo:n}}return t.controlOptions})),l(this,"onChange",(function(e,n){t.contextOnChange&&t.contextOnChange(e,n)})),l(this,"getControlUrlInfo",(function(e){var n=/^(https:\/\/[^/]+)\/(embedding|embed)\/([^/]+)\/[^?]+\?(.*)/i.exec(e)||[];if((null==n?void 0:n.length)<4)throw new Error('Invalid embedding url: "'.concat(e,'"'));return{sessionId:n[3],host:n[1],urlSearchParams:new URLSearchParams(n[4])}})),l(this,"getBodyElement",(function(){var e,n=null===(e=document.getElementsByTagName("body"))||void 0===e?void 0:e[0];if(!n){var r="could not locate <body> element in the page";throw t.onChange(new K(R.NO_BODY,C.ERROR,r),{frame:null}),new Error(r)}return n})),this.contextId=ce(),this.experienceIdentifiers=new Set,this.eventManager=new Qe,this.contextOnChange=n.onChange,this.logger=new Be})),qe=function(){var e=a(r().mark((function e(){var n,t=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.length>0&&void 0!==t[0]?t[0]:{},e.abrupt("return",new ze(n));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xe=t(t(t(t(t(t(t(t(t(t(t(t(t(t({},U),S),N),L),D),P),M),k),V),Q),j),B),q),X);e.BaseExperience=ue,e.BaseExperienceFrame=_e,e.CALCULATED_METRIC_COLUMN_TYPE=H,e.ChangeEvent=K,e.ChangeEventLevel=C,e.ChangeEventName=R,e.ConsoleExperience=Se,e.ConsoleExperienceFrame=ye,e.ControlExperience=je,e.ControlExperienceFrame=Ve,e.DashboardExperience=Ne,e.DashboardExperienceFrame=be,e.DataResponse=te,e.DefaultLogger=Be,e.EmbeddingContext=ze,e.EmbeddingEvent=Z,e.EmbeddingMessageEvent=W,e.ErrorChangeEventName=I,e.ErrorResponse=ne,e.EventManager=Qe,e.ExperienceType=F,e.GenerativeQnAExperience=He,e.GenerativeQnAExperienceFrame=Fe,e.GenerativeQnAPanelType=z,e.GetterMessageEventName=y,e.Iframe=ge,e.InfoChangeEventName=w,e.InfoMessageEventName=_,e.InternalQBaseExperience=De,e.InvokerMessageEventName=A,e.MessageEventName=b,e.PostMessageEvent=$,e.QSE=Xe,e.QSearchExperience=Ue,e.QSearchExperienceFrame=Le,e.ResponseMessage=J,e.SDK_VERSION=Oe,e.SPECIAL_DATAPOINT_VALUE_TYPES=G,e.SetterMessageEventName=T,e.SuccessResponse=ee,e.TargetedMessageEvent=Y,e.VisualExperience=Te,e.VisualExperienceFrame=Ie,e.WarnChangeEventName=x,e.createEmbeddingContext=qe}));
//# sourceMappingURL=quicksight-embedding-js-sdk.min.js.map
